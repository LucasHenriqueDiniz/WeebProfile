# Nixpacks configuration for Railway
# Railway uses Nixpacks by default, but this file provides explicit configuration

[phases.setup]
nixPkgs = ["nodejs", "pnpm"]

[phases.install]
cmds = [
  "pnpm install --frozen-lockfile"
]

[phases.build]
cmds = [
  "pnpm --filter @weeb/weeb-plugins build",
  "pnpm --filter @weeb/svg-generator build",
  "cd svg-generator && npx playwright@latest install chromium --with-deps"
]

[start]
cmd = "cd svg-generator && pnpm start"
