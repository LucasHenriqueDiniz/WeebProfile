name: Generate SVGs Cron

on:
  schedule:
    # Roda √†s 3h da manh√£ UTC (ajuste para seu fuso hor√°rio)
    # Para 3h da manh√£ em Bras√≠lia (UTC-3), use: '0 6 * * *'
    - cron: '0 3 * * *'
  workflow_dispatch: # Permite execu√ß√£o manual no GitHub

jobs:
  generate-svgs:
    runs-on: ubuntu-latest
    steps:
      - name: Call Cron Endpoint
        env:
          CRON_SECRET: ${{ secrets.CRON_SECRET }}
          DASHBOARD_URL: ${{ secrets.DASHBOARD_URL }}
        run: |
          if [ -z "$CRON_SECRET" ]; then
            echo "‚ö†Ô∏è CRON_SECRET n√£o configurado. Pulando autentica√ß√£o..."
            curl -X GET "${DASHBOARD_URL}/api/cron/generate-svgs"
          else
            echo "üîê Usando autentica√ß√£o com CRON_SECRET"
            curl -X GET \
              -H "Authorization: Bearer ${CRON_SECRET}" \
              "${DASHBOARD_URL}/api/cron/generate-svgs"
          fi


